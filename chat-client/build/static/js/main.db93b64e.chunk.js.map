{"version":3,"sources":["component/chathistory/chatoption.js","component/header.js","component/chattopbox.js","component/chattop.js","component/chatmain/chatuser.js","component/loader.js","component/chatmain/chatmain.js","component/chathistory/chathistorytop.js","socket.js","component/config/config.js","component/chathistory/chathistorybottom.js","component/chathistory/chat.js","component/chathistory/chathistorymain.js","component/chathistory/chathistory.js","component/chathistory/empty.js","component/chatmain/chatsearchnew.js","chat.js","component/chatauth/login.js","get_message_key.js","App.js","serviceWorker.js","index.js","getKey.js","component/empty_inbox.png"],"names":["ChatOption","props","state","className","style","display","this","top","right","bottom","left","options","map","d","key","onClick","fun","icon","name","React","Component","ChatHeader","setState","prev","history","push","localStorage","clear","withRouter","ChatTopBox","width","height","chatuser","alt","borderRadius","src","fontSize","textOverflow","top_message","Loader","chatmain","get_messages","a","dispatch","fetch","method","mode","credentials","headers","Accept","Authorization","getItem","body","JSON","stringify","uid","then","file","status","json","res","type","payload","message","err","get_users","users","catch","messages","length","_id","from","justifyContent","alignItems","color","fontFamily","textAlign","connect","ChatHistoryTop","back","window","matchMedia","matches","cursor","paddingLeft","justifySelf","marginLeft","marginRight","alert","socket","io","firebase","require","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","ChatHistoryBottom","handle","e","target","value","send","text","uid_from","to","time","Date","emit","handlepress","placeholder","onChange","document","createElement","setAttribute","click","onchange","uuidv4","storage","ref","child","put","files","navigator","geolocation","getCurrentPosition","position","coords","longitude","latitude","config","Chat","delete_options","id","confirm","user","image","display_delete_option","decodeURI","getDownloadURL","url","mapboxgl","accessToken","Map","container","mapContainer","zoom","center","Marker","setLngLat","addTo","addControl","NavigationControl","backgroundColor","alignSelf","maxWidth","fontWeight","transform","padding","overflowWrap","marginBlockEnd","marginBlockStart","loading","el","href","download","ChatHistoryMain","get_chat_history","success","error","get_chat_history_socket","componentWillMount","on","data","prevProps","objDiv","getElementById","scrollTop","scrollHeight","filter","don","arr","chathistory","match","params","uid_to","empty","backdropFilter","ChatSearchNew","search","input","people","username","location","pathname","path","component","ChatMain","exact","ChatHistory","Login","login","preventDefault","email","password","setItem","token","Register","Auth","getMessageKey","i","init_state","store","createStore","action","getkey","mess1","val1","a1","slice","b1","a2","mess2","val2","key_user","key_id","console","log","createBrowserHistory","App","urlBase64ToUint8Array","base64String","base64","repeat","replace","rawData","atob","outputArray","Uint8Array","charCodeAt","Boolean","hostname","Notification","requestPermission","serviceWorker","register","scope","reg","active","PushManager","subscribe","userVisibilityOnly","applicationServerKey","subscription","ReactDOM","render","module","exports","val"],"mappings":"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","file":"static/js/main.db93b64e.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nclass ChatOption extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"chat-option\"\r\n        style={{\r\n          display: this.props.display,\r\n          top: this.props.top ? this.props.top : null,\r\n          right: this.props.right ? this.props.right : null,\r\n          bottom: this.props.bottom ? this.props.bottom : null,\r\n          left: this.props.left ? this.props.left : null,\r\n        }}\r\n      >\r\n        {this.props.options.map((d, key) => {\r\n          return (\r\n            <div className=\"options\" onClick={d.fun}>\r\n              <i className=\"material-icons\">{d.icon}</i>\r\n              <p>{d.name}</p>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChatOption;\r\n","import React from \"react\";\r\nimport ChatOption from \"./chathistory/chatoption\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nclass ChatHeader extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      display: \"none\",\r\n    };\r\n  }\r\n  display = () => {\r\n    if (this.state.display === \"none\") {\r\n      this.setState((prev) => ({\r\n        ...prev,\r\n        display: \"block\",\r\n      }));\r\n    } else {\r\n      this.setState((prev) => ({\r\n        ...prev,\r\n        display: \"none\",\r\n      }));\r\n    }\r\n  };\r\n  render() {\r\n    return (\r\n      <div className=\"chat-header\">\r\n        <div className=\"chat-header-box\">\r\n          <h1>Chat App</h1>\r\n        </div>\r\n        <div className=\"chat-header-box\">\r\n          <i className=\"material-icons\">search</i>\r\n          <i\r\n            className=\"material-icons\"\r\n            onClick={() => {\r\n              this.props.history.push(\"/search\");\r\n            }}\r\n          >\r\n            chat\r\n          </i>\r\n          <i className=\"material-icons\" onClick={this.display}>\r\n            more_vert\r\n          </i>\r\n        </div>\r\n        <ChatOption\r\n          display={this.state.display}\r\n          top=\"60px\"\r\n          left=\"150px\"\r\n          options={[\r\n            {\r\n              name: \"Settings\",\r\n              //icon: \"insert_photo\",\r\n              fun: () => {},\r\n            },\r\n            {\r\n              name: \"Logout\",\r\n              //icon: \"assignment\",\r\n              fun: () => {\r\n                localStorage.clear();\r\n                this.props.history.push(\"/account/login\");\r\n              },\r\n            },\r\n          ]}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(ChatHeader);\r\n","import React from \"react\";\r\n\r\nclass ChatTopBox extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"chat-top-box\"\r\n        style={{ width: 100 / 3 + \"%\", height: \"70px\" }}\r\n      >\r\n        <i className=\"material-icons\">{this.props.name}</i>\r\n        <div className=\"bar\" style={{ height: this.props.height }}></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChatTopBox;\r\n","import React from \"react\";\r\n\r\nimport ChatTopBox from \"./chattopbox\";\r\n\r\nclass ChatTop extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"chat-top\">\r\n        <ChatTopBox height=\"5px\" name=\"message\" />\r\n        <ChatTopBox name=\"call\" />\r\n        <ChatTopBox name=\"videocam\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChatTop;\r\n","import React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nclass chatuser extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"chat-user\"\r\n        onClick={() => {\r\n          this.props.history.push(\"/chat/\" + this.props.name);\r\n        }}\r\n      >\r\n        <img\r\n          alt=\"user\"\r\n          style={{ borderRadius: \"100%\" }}\r\n          width=\"50\"\r\n          height=\"50\"\r\n          src=\"https://i.stack.imgur.com/l60Hf.png\"\r\n        />\r\n        <div className=\"chat-user-message\">\r\n          <h4 style={{ fontSize: 16 }}>{this.props.name}</h4>\r\n          <p\r\n            style={{ fontSize: 14, textOverflow: \"ellipsis\", width: \"100%\" }}\r\n            className=\"chat-message\"\r\n          >\r\n            {this.props.top_message}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(chatuser);\r\n","import React from \"react\";\r\n\r\nclass Loader extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"loader\" style={{ width: \"100%\", height: \"100%\" }}>\r\n        <div className=\"load\"></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Loader;\r\n","import React from \"react\";\r\nimport ChatUser from \"./chatuser\";\r\n\r\nimport { withRouter } from \"react-router-dom\";\r\nimport Loader from \"../loader\";\r\n\r\nimport { connect } from \"react-redux\";\r\n\r\nclass chatmain extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      messages: null,\r\n      users: null,\r\n      err: null,\r\n    };\r\n  }\r\n\r\n  get_messages = async () => {\r\n    const { dispatch } = this.props;\r\n    await fetch(\"http://localhost:8000/get_messages\", {\r\n      method: \"POST\",\r\n      mode: \"cors\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"text/plain\",\r\n        Authorization: \"Brearer \" + localStorage.getItem(\"chat-app-token\"),\r\n      },\r\n      body: JSON.stringify({ uid: localStorage.getItem(\"chat-app-uid\") }),\r\n    }).then((file) => {\r\n      if (file.status === 200) {\r\n        file.json().then((res) => {\r\n          dispatch({ type: \"GET_MESSAGE\", payload: res.message });\r\n        });\r\n      } else {\r\n        this.setState((prev) => ({\r\n          ...prev,\r\n          err: \"Something went wrong. Please check your Internet connection\",\r\n        }));\r\n      }\r\n    });\r\n  };\r\n\r\n  get_users = async () => {\r\n    await fetch(\"http://localhost:8000/get_message_user\", {\r\n      method: \"post\",\r\n      mode: \"cors\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"text/plain\",\r\n      },\r\n      body: JSON.stringify({ uid: localStorage.getItem(\"chat-app-uid\") }),\r\n    })\r\n      .then((file) =>\r\n        file.json().then((res) => {\r\n          this.setState((prev) => ({ ...prev, users: res }));\r\n        })\r\n      )\r\n      .catch((err) => {\r\n        this.setState((prev) => ({\r\n          ...prev,\r\n          err: \"No Connection to Internet\",\r\n        }));\r\n      });\r\n  };\r\n\r\n  async UNSAFE_componentWillMount() {\r\n    this.get_messages();\r\n    //this.get_users();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"chat-main\">\r\n        {this.props.messages !== null ? (\r\n          this.props.messages.length !== 0 ? (\r\n            this.props.messages.map((d, key) => {\r\n              return (\r\n                <ChatUser\r\n                  key={key}\r\n                  name={d._id}\r\n                  top_message={\r\n                    d.messages[d.messages.length - 1].type === \"media\"\r\n                      ? d.messages[d.messages.length - 1].from +\r\n                        \" sent you an Image\"\r\n                      : d.messages[d.messages.length - 1].type === \"document\"\r\n                      ? d.messages[d.messages.length - 1].from +\r\n                        \" sent you an Document\"\r\n                      : d.messages[d.messages.length - 1].message\r\n                  }\r\n                />\r\n              );\r\n            })\r\n          ) : (\r\n            <div\r\n              style={{\r\n                width: \"100%\",\r\n                height: \"100%\",\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <p\r\n                style={{\r\n                  color: \"#838383\",\r\n                  fontSize: 14,\r\n                  fontFamily: \"sans-serif\",\r\n                }}\r\n              >\r\n                No Conversation\r\n              </p>\r\n            </div>\r\n          )\r\n        ) : this.state.err !== null ? (\r\n          <div\r\n            style={{\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              display: \"flex\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n            }}\r\n          >\r\n            <p\r\n              style={{\r\n                color: \"#838383\",\r\n                fontSize: 14,\r\n                fontFamily: \"sans-serif\",\r\n                textAlign: \"center\",\r\n              }}\r\n            >\r\n              {this.state.err}\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <Loader />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    messages: state.messages,\r\n  };\r\n};\r\nexport default withRouter(connect(mapStateToProps)(chatmain));\r\n","import React from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport ChatOption from \"./chatoption\";\r\n\r\nclass ChatHistoryTop extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      display: \"none\",\r\n    };\r\n  }\r\n\r\n  display = () => {\r\n    if (this.state.display === \"none\") {\r\n      this.setState((prev) => ({\r\n        ...prev,\r\n        display: \"block\",\r\n      }));\r\n    } else {\r\n      this.setState((prev) => ({\r\n        ...prev,\r\n        display: \"none\",\r\n      }));\r\n    }\r\n  };\r\n  back = () => {\r\n    this.props.history.push(\"/chat\");\r\n  };\r\n  render() {\r\n    return (\r\n      <div className=\"chat-history-top\">\r\n        <div\r\n          className=\"overlay\"\r\n          style={{ display: this.state.display }}\r\n          onClick={this.display}\r\n        ></div>\r\n        {window.matchMedia(\"(max-width: 500px)\").matches ? (\r\n          <i\r\n            className=\"material-icons\"\r\n            onClick={this.back}\r\n            style={{\r\n              cursor: \"pointer\",\r\n              width: \"40px\",\r\n              textAlign: \"center\",\r\n              color: \"white\",\r\n            }}\r\n          >\r\n            arrow_back_ios\r\n          </i>\r\n        ) : null}\r\n        <img\r\n          src=\"https://images.unsplash.com/photo-1527980965255-d3b416303d12\"\r\n          style={{\r\n            borderRadius: \"100%\",\r\n            paddingLeft: window.matchMedia(\"(max-width: 500px)\").matches\r\n              ? 0\r\n              : 10,\r\n          }}\r\n          height=\"50\"\r\n          width=\"50\"\r\n        />\r\n        <h3\r\n          style={{\r\n            color: \"white\",\r\n            paddingLeft: 10,\r\n            fontFamily: \"sans-serif\",\r\n            fontSize: 18,\r\n          }}\r\n        >\r\n          {this.props.name}\r\n        </h3>\r\n        <i\r\n          className=\"material-icons\"\r\n          style={{\r\n            color: \"var(--white--)\",\r\n            justifySelf: \"flex-end\",\r\n            display: \"flex\",\r\n            marginLeft: \"auto\",\r\n            marginRight: \"20px\",\r\n            cursor: \"pointer\",\r\n          }}\r\n          onClick={this.display}\r\n        >\r\n          more_vert\r\n        </i>\r\n        <ChatOption\r\n          display={this.state.display}\r\n          top=\"60px\"\r\n          right=\"5px\"\r\n          options={[\r\n            {\r\n              name: \"Get Info\",\r\n              icon: \"info\",\r\n              fun: () => {\r\n                alert(\"Get Info\");\r\n              },\r\n            },\r\n            {\r\n              name: \"Clear Chat\",\r\n              icon: \"delete_sweep\",\r\n              fun: () => {\r\n                alert(\"Clear Chats\");\r\n              },\r\n            },\r\n            {\r\n              name: \"Settings\",\r\n              icon: \"settings\",\r\n              fun: () => {\r\n                alert(\"Settings\");\r\n              },\r\n            },\r\n          ]}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(ChatHistoryTop);\r\n","import io from \"socket.io-client\";\r\n\r\n//const socket = io(\"http://localhost:8000\");\r\nconst socket = io(\"http://localhost:8000\");\r\nexport default socket;\r\n","var firebase = require(\"firebase\");\r\n\r\nvar firebaseConfig = {\r\n  apiKey: \"AIzaSyDZsjINu9aerw6itaCwwayaR1C7isSfKXk\",\r\n  authDomain: \"proj1-798c4.firebaseapp.com\",\r\n  databaseURL: \"https://proj1-798c4.firebaseio.com\",\r\n  projectId: \"proj1-798c4\",\r\n  storageBucket: \"proj1-798c4.appspot.com\",\r\n  messagingSenderId: \"332847525454\",\r\n  appId: \"1:332847525454:web:100195b9d746896c\",\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport default firebase;\r\n","import React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport ChatOption from \"./chatoption\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport socket from \"../../socket\";\r\nimport firebase from \"../config/config\";\r\n\r\nclass ChatHistoryBottom extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      text: \"\",\r\n      display: \"none\",\r\n    };\r\n    //this.socket = io(\"http://localhost:8000\");\r\n  }\r\n  handle = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  display = () => {\r\n    if (this.state.display === \"none\") {\r\n      this.setState((prev) => ({\r\n        ...prev,\r\n        display: \"block\",\r\n      }));\r\n    } else {\r\n      this.setState((prev) => ({\r\n        ...prev,\r\n        display: \"none\",\r\n      }));\r\n    }\r\n  };\r\n\r\n  send = () => {\r\n    if (this.state.text !== \"\") {\r\n      this.props.dispatch({\r\n        type: \"ADD_MESSAGE\",\r\n        payload: {\r\n          uid_from: localStorage.getItem(\"chat-app-uid\"),\r\n          from: localStorage.getItem(\"chat-app-from\"),\r\n          to: this.props.name,\r\n          message: this.state.text,\r\n          type: \"message\",\r\n          time: new Date(),\r\n        },\r\n      });\r\n      socket.emit(\"send-message\", {\r\n        uid_from: localStorage.getItem(\"chat-app-uid\"),\r\n        from: localStorage.getItem(\"chat-app-from\"),\r\n        to: this.props.name,\r\n        message: this.state.text,\r\n        type: \"message\",\r\n        time: new Date(),\r\n      });\r\n    }\r\n    this.setState((prev) => ({\r\n      ...prev,\r\n      text: \"\",\r\n    }));\r\n  };\r\n\r\n  handlepress = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      this.send();\r\n\r\n      this.setState((prev) => ({\r\n        ...prev,\r\n        text: \"\",\r\n      }));\r\n    }\r\n  };\r\n  render() {\r\n    return (\r\n      <div className=\"chat-history-bottom\">\r\n        <div\r\n          className=\"overlay\"\r\n          style={{ display: this.state.display }}\r\n          onClick={this.display}\r\n        ></div>\r\n        <textarea\r\n          className=\"chat-type\"\r\n          placeholder=\"Enter Your Message...\"\r\n          name=\"text\"\r\n          value={this.state.text}\r\n          onChange={this.handle}\r\n        />\r\n        <ChatOption\r\n          display={this.state.display}\r\n          bottom=\"60px\"\r\n          right=\"80px\"\r\n          options={[\r\n            {\r\n              name: \"Gallery\",\r\n              icon: \"insert_photo\",\r\n              fun: () => {\r\n                var a = document.createElement(\"input\");\r\n                a.setAttribute(\"type\", \"file\");\r\n                a.setAttribute(\r\n                  \"accept\",\r\n                  \"image/png, image/jpeg, image/gif, image/jpeg\"\r\n                );\r\n                //a.setAttribute(\"multiple\", true);\r\n                a.click();\r\n                const { dispatch, name } = this.props;\r\n                //const { emit } = this.socket;\r\n                a.onchange = async () => {\r\n                  var uid = uuidv4();\r\n                  var storageref = firebase.storage().ref();\r\n\r\n                  storageref\r\n                    .child(\"/messages/\" + uid + \"/0.jpg\")\r\n                    .put(a.files[0]);\r\n\r\n                  dispatch({\r\n                    type: \"ADD_MESSAGE\",\r\n                    payload: {\r\n                      uid_from: localStorage.getItem(\"chat-app-uid\"),\r\n                      from: localStorage.getItem(\"chat-app-from\"),\r\n                      to: name,\r\n                      message: uid,\r\n                      type: \"media\",\r\n                      time: new Date(),\r\n                    },\r\n                  });\r\n                  socket.emit(\"send-message\", {\r\n                    uid_from: localStorage.getItem(\"chat-app-uid\"),\r\n                    from: localStorage.getItem(\"chat-app-from\"),\r\n                    to: name,\r\n                    message: uid,\r\n                    type: \"media\",\r\n                    time: new Date(),\r\n                  });\r\n\r\n                  this.setState((prev) => ({\r\n                    ...prev,\r\n                    display: \"none\",\r\n                  }));\r\n                };\r\n              },\r\n            },\r\n            {\r\n              name: \"Share Location\",\r\n              icon: \"location_on\",\r\n              fun: () => {\r\n                const { dispatch, name } = this.props;\r\n                //const { emit } = this.socket;\r\n\r\n                navigator.geolocation.getCurrentPosition((position) => {\r\n                  dispatch({\r\n                    type: \"ADD_MESSAGE\",\r\n                    payload: {\r\n                      uid_from: localStorage.getItem(\"chat-app-uid\"),\r\n                      from: localStorage.getItem(\"chat-app-from\"),\r\n                      to: name,\r\n                      type: \"location\",\r\n                      message: [\r\n                        position.coords.longitude,\r\n                        position.coords.latitude,\r\n                      ],\r\n                      time: new Date(),\r\n                    },\r\n                  });\r\n                  socket.emit(\"send-message\", {\r\n                    uid_from: localStorage.getItem(\"chat-app-uid\"),\r\n                    from: localStorage.getItem(\"chat-app-from\"),\r\n                    to: name,\r\n                    type: \"location\",\r\n                    message: [\r\n                      position.coords.latitude,\r\n                      position.coords.longitude,\r\n                    ],\r\n                    time: new Date(),\r\n                  });\r\n                  this.setState((prev) => ({\r\n                    ...prev,\r\n                    display: \"none\",\r\n                  }));\r\n                });\r\n              },\r\n            },\r\n            {\r\n              name: \"Document\",\r\n              icon: \"assignment\",\r\n              fun: () => {\r\n                var a = document.createElement(\"input\");\r\n                a.setAttribute(\"type\", \"file\");\r\n                a.setAttribute(\r\n                  \"accept\",\r\n                  \"application/pdf,application/ods,application/pptx,application/html,application/csv,application/xlsx\"\r\n                );\r\n                //a.setAttribute(\"multiple\", true);\r\n                a.click();\r\n                const { dispatch, name } = this.props;\r\n                //const { emit } = this.socket;\r\n                a.onchange = async () => {\r\n                  var uid = uuidv4();\r\n                  var storageref = firebase.storage().ref();\r\n\r\n                  storageref\r\n                    .child(\"/messages/\" + uid + \"/\" + a.files[0].name)\r\n                    .put(a.files[0]);\r\n\r\n                  dispatch({\r\n                    type: \"ADD_MESSAGE\",\r\n                    payload: {\r\n                      uid_from: localStorage.getItem(\"chat-app-uid\"),\r\n                      from: localStorage.getItem(\"chat-app-from\"),\r\n                      to: name,\r\n                      message: uid,\r\n                      type: \"document\",\r\n                      time: new Date(),\r\n                    },\r\n                  });\r\n                  socket.emit(\"send-message\", {\r\n                    uid_from: localStorage.getItem(\"chat-app-uid\"),\r\n                    from: localStorage.getItem(\"chat-app-from\"),\r\n                    to: name,\r\n                    message: uid,\r\n                    type: \"document\",\r\n                    time: new Date(),\r\n                  });\r\n                  this.setState((prev) => ({\r\n                    ...prev,\r\n                    display: \"none\",\r\n                  }));\r\n                };\r\n              },\r\n            },\r\n          ]}\r\n        />\r\n        <i className=\"material-icons material-bottom\">keyboard_voice</i>\r\n        <i onClick={this.display} className=\"material-icons material-bottom\">\r\n          attach_file\r\n        </i>\r\n        <i onClick={this.send} className=\"material-icons material-bottom\">\r\n          send\r\n        </i>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    messages: state.messages,\r\n  };\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps)(ChatHistoryBottom));\r\n","import React from \"react\";\r\nimport mapboxgl from \"mapbox-gl\";\r\nimport firebase from \"../config/config\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nrequire(\"dotenv\").config();\r\n\r\nclass Chat extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      display: \"none\",\r\n      image: null,\r\n      display_delete_option: \"none\",\r\n    };\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.setState((prev) => ({\r\n      ...prev,\r\n      display: \"none\",\r\n    }));\r\n    if (this.props.type === \"media\" || this.props.type === \"document\") {\r\n      var storageRef = firebase.storage().ref();\r\n      storageRef\r\n        .child(\"/messages/\" + decodeURI(this.props.message) + \"/0.jpg\")\r\n        .getDownloadURL()\r\n        .then((url) => {\r\n          this.setState((prev) => ({\r\n            ...prev,\r\n            image: url,\r\n          }));\r\n        });\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.type === \"location\") {\r\n      mapboxgl.accessToken =\r\n        \"pk.eyJ1Ijoic2lzYXBpNzkzOSIsImEiOiJjazYwbnFjM3QwOTdkM21wa3p3MGFoODBlIn0.X0_rZjn7eQ2jIOOhqPG1AA\";\r\n      var map = new mapboxgl.Map({\r\n        container: this.mapContainer,\r\n        style: \"mapbox://styles/mapbox/dark-v10\",\r\n        zoom: 9,\r\n        center: [this.props.message[1], this.props.message[0]],\r\n      });\r\n      //mapboxgl.LngLat(-73.9749, 40.7736);\r\n      new mapboxgl.Marker()\r\n        .setLngLat([this.props.message[1], this.props.message[0]])\r\n        .addTo(map);\r\n      map.addControl(new mapboxgl.NavigationControl());\r\n    }\r\n  }\r\n\r\n  delete_options = (id) => {\r\n    if (window.confirm(\"Are you sure you want to delete the message?\")) {\r\n      fetch(\"http://localhost:8000/delete_message\", {\r\n        method: \"DELETE\",\r\n        credentials: \"include\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"text/plain\",\r\n          Authorization: \"Brearer \" + localStorage.getItem(\"chat-app-token\"),\r\n        },\r\n        body: JSON.stringify({ id }),\r\n      }).then((file) =>\r\n        file.json().then((res) => {\r\n          this.props.dispatch({\r\n            type: \"DELETE_MESSAGE\",\r\n            payload: {\r\n              id: id,\r\n              user: this.props.to,\r\n            },\r\n          });\r\n          this.setState((prev) => ({\r\n            ...prev,\r\n            display: \"none\",\r\n          }));\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  display = () => {\r\n    this.setState((prev) => ({\r\n      ...prev,\r\n      display: this.state.display === \"none\" ? \"block\" : \"none\",\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"chat1\"\r\n        style={{\r\n          backgroundColor:\r\n            localStorage.getItem(\"chat-app-from\") === this.props.from\r\n              ? \"var(--blue--)\"\r\n              : \"var(--white--)\",\r\n          alignSelf:\r\n            localStorage.getItem(\"chat-app-from\") === this.props.from\r\n              ? \"flex-start\"\r\n              : \"flex-end\",\r\n          maxWidth: this.props.type === \"media\" ? null : \"300px\",\r\n        }}\r\n      >\r\n        <div\r\n          className=\"chat-message-name\"\r\n          style={{\r\n            fontFamily: \"sans-serif\",\r\n            fontWeight: \"bold\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"space-between\",\r\n          }}\r\n        >\r\n          <div>{this.props.from}</div>\r\n          <i\r\n            className=\"material-icons\"\r\n            onClick={this.display}\r\n            style={{\r\n              fontSize: 18,\r\n              cursor: \"pointer\",\r\n              transform: \"rotate(270deg)\",\r\n              alignItems: \"center\",\r\n              padding: \"2px\",\r\n            }}\r\n          >\r\n            more_vert\r\n          </i>\r\n        </div>\r\n        {this.props.type === \"message\" ? (\r\n          <p\r\n            style={{\r\n              fontFamily: \"sans-serif\",\r\n              overflowWrap: \"break-word\",\r\n              marginBlockEnd: 0,\r\n              marginBlockStart: 0,\r\n            }}\r\n            className=\"chat-message\"\r\n          >\r\n            {this.props.message}\r\n          </p>\r\n        ) : this.props.type === \"media\" ? (\r\n          <img\r\n            src={\r\n              this.state.image\r\n              //||\r\n              //\"https://motiongraphicsphoebe.files.wordpress.com/2018/10/8ee212dac057d412972e0c8cc164deee.gif\"\r\n            }\r\n            height=\"auto\"\r\n            width=\"300\"\r\n            loading=\"lazy\"\r\n            alt=\"message\"\r\n          />\r\n        ) : this.props.type === \"location\" ? (\r\n          <div\r\n            ref={(el) => (this.mapContainer = el)}\r\n            style={{ width: \"280px\", height: \"150px\", borderRadius: \"10px\" }}\r\n          ></div>\r\n        ) : this.props.type === \"document\" ? (\r\n          <a href={this.state.image} download>\r\n            File\r\n          </a>\r\n        ) : (\r\n          <p\r\n            style={{\r\n              fontFamily: \"sans-serif\",\r\n              overflowWrap: \"break-word\",\r\n              marginBlockEnd: 0,\r\n              marginBlockStart: 0,\r\n            }}\r\n            className=\"chat-message\"\r\n          >\r\n            {this.props.message}\r\n          </p>\r\n        )}\r\n        <div\r\n          className=\"chat-main-option\"\r\n          style={{\r\n            display: this.state.display,\r\n            marginLeft:\r\n              localStorage.getItem(\"chat-app-from\") !== this.props.from\r\n                ? \"0px\"\r\n                : \"150px\",\r\n            alignItems:\r\n              localStorage.getItem(\"chat-app-from\") !== this.props.from\r\n                ? \"flex-start\"\r\n                : \"flex-end\",\r\n          }}\r\n        >\r\n          <div className=\"option\">Updated Message</div>\r\n          <div\r\n            className=\"option\"\r\n            onClick={() => this.delete_options(this.props.id)}\r\n          >\r\n            Delete Message\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    messages: state.messages,\r\n  };\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps)(Chat));\r\n","import React from \"react\";\r\nimport Loader from \"../loader\";\r\nimport Chat from \"./chat\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport socket from \"../../socket\";\r\n\r\nimport { connect } from \"react-redux\";\r\nclass ChatHistoryMain extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      messages: null,\r\n      error: \"\",\r\n      display: \"none\",\r\n    };\r\n  }\r\n\r\n  get_chat_history = async (to) => {\r\n    //this.props.dispatch({ type: \"SET_MESSAGE\" });\r\n    await fetch(\"http://localhost:8000/chat_history\", {\r\n      method: \"POST\",\r\n      mode: \"cors\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"text/plain\",\r\n        Authorization: \"Brearer \" + localStorage.getItem(\"chat-app-token\"),\r\n      },\r\n      body: JSON.stringify({\r\n        uid: localStorage.getItem(\"chat-app-uid\"),\r\n        to: to,\r\n      }),\r\n    })\r\n      .then((file) => file.json())\r\n      .then((res) => {\r\n        if (res.success) {\r\n          this.props.dispatch({ type: \"GET_MESSAGE\", payload: res.message });\r\n        } else {\r\n          this.setState((prev) => ({\r\n            ...prev,\r\n            error: res.message,\r\n          }));\r\n        }\r\n      });\r\n  };\r\n  get_chat_history_socket = () => {\r\n    //this.socket.in(\"hello\").on(localStorage.getItem(\"chat-app-uid\"), (data) => {\r\n    ///this.props.dispatch({ type: \"ADD_MESSAGE\", payload: data });\r\n    //});\r\n  };\r\n  componentWillMount = () => {\r\n    //this.get_chat_history(this.props.to);\r\n  };\r\n  componentDidMount() {\r\n    // this.socket = io(\"http://localhost:8000\");\r\n    socket.on(localStorage.getItem(\"chat-app-uid\"), (data) => {\r\n      this.props.dispatch({ type: \"ADD_MESSAGE\", payload: data });\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.messages !== prevProps.messages) {\r\n      //return this.props.messages;\r\n    }\r\n    var objDiv = document.getElementById(\"chat-history\");\r\n    objDiv.scrollTop = objDiv.scrollHeight;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"chat-history-main\" id=\"chat-history\">\r\n        {this.props.messages !== null ? (\r\n          this.props.messages\r\n            .filter((don) => {\r\n              if (don._id === this.props.to) {\r\n                return don;\r\n              }\r\n            })\r\n            .map((arr) => {\r\n              return arr.messages.map((d, key) => {\r\n                return (\r\n                  <Chat\r\n                    key={key}\r\n                    to={this.props.to}\r\n                    from={d.from}\r\n                    message={d.message}\r\n                    type={d.type}\r\n                    time={d.time}\r\n                    id={d._id}\r\n                  />\r\n                );\r\n              });\r\n            })\r\n        ) : (\r\n          <Loader />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    ...state,\r\n    messages: state.messages,\r\n  };\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps)(ChatHistoryMain));\r\n","import React from \"react\";\r\nimport ChatHistoryTop from \"./chathistorytop\";\r\nimport ChatHistoryBottom from \"./chathistorybottom\";\r\nimport ChatHistoryMain from \"./chathistorymain\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nclass chathistory extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"chat-history\" style={{ width: \"100%\", height: \"100%\" }}>\r\n        <ChatHistoryTop name={this.props.match.params.user} />\r\n        <ChatHistoryMain to={this.props.match.params.user} />\r\n        <ChatHistoryBottom\r\n          name={this.props.match.params.user}\r\n          uid_to={this.props.match.params.user}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(chathistory);\r\n","import React from \"react\";\r\nimport image from \"../empty_inbox.png\";\r\nclass empty extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n  render() {\r\n    return (\r\n      <img\r\n        src={image}\r\n        width=\"300\"\r\n        height=\"300\"\r\n        style={{ backdropFilter: \"red\" }}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default empty;\r\n","import React from \"react\";\r\nimport ChatUser from \"./chatuser\";\r\n\r\nclass ChatSearchNew extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      input: \"\",\r\n      search: null,\r\n    };\r\n  }\r\n\r\n  search = (input) => {\r\n    fetch(\"http://localhost:8000/user_search\", {\r\n      method: \"POST\",\r\n      mode: \"cors\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"text/plain\",\r\n      },\r\n      body: JSON.stringify({ user: input }),\r\n    }).then((file) =>\r\n      file.json().then((data) => {\r\n        this.setState((prev) => ({\r\n          ...prev,\r\n          search: data.people[0].users,\r\n        }));\r\n      })\r\n    );\r\n  };\r\n\r\n  handle = (e) => {\r\n    const { value, name } = e.target;\r\n    this.setState((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n    this.search(this.state.input);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"chat-serach-new\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"input\"\r\n          placeholder=\"Enter Username\"\r\n          onChange={this.handle}\r\n        />\r\n        <div className=\"chat-search-main\">\r\n          {this.state.search !== null\r\n            ? this.state.search.map((d, key) => {\r\n                return <ChatUser name={d.username} top_message={null} />;\r\n              })\r\n            : null}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChatSearchNew;\r\n","import React from \"react\";\r\nimport ChatHeader from \"./component/header\";\r\nimport ChatTop from \"./component/chattop\";\r\nimport ChatMain from \"./component/chatmain/chatmain\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport ChatHistory from \"./component/chathistory/chathistory\";\r\nimport empty from \"./component/chathistory/empty\";\r\nimport ChatSearchNew from \"./component/chatmain/chatsearchnew\";\r\n\r\nclass Chat extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (!localStorage.getItem(\"chat-app-isLogined\")) {\r\n      this.props.history.push(\"/account/login\");\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"chat\">\r\n        <div\r\n          className=\"chat-left\"\r\n          style={{\r\n            width:\r\n              (this.props.location.pathname === \"/chat\" ||\r\n                this.props.location.pathname === \"/search\") &&\r\n              window.matchMedia(\"(max-width: 500px)\").matches\r\n                ? \"100%\"\r\n                : this.props.match.params.user &&\r\n                  window.matchMedia(\"(max-width: 500px)\").matches\r\n                ? \"0%\"\r\n                : \"30%\",\r\n            display:\r\n              (this.props.location.pathname === \"/chat\" ||\r\n                this.props.location.pathname === \"/search\") &&\r\n              window.matchMedia(\"(max-width: 500px)\").matches\r\n                ? \"block\"\r\n                : this.props.match.params.user &&\r\n                  window.matchMedia(\"(max-width: 500px)\").matches\r\n                ? \"none\"\r\n                : \"block\",\r\n          }}\r\n        >\r\n          <ChatHeader />\r\n          {/* <ChatTop /> */}\r\n          <Switch>\r\n            <Route path=\"/chat\" component={ChatMain} exact />\r\n            <Route path=\"/chat/:user\" component={ChatMain} exact />\r\n            <Route path=\"/search\" component={ChatSearchNew} exact />\r\n          </Switch>\r\n        </div>\r\n        <div\r\n          className=\"chat-right\"\r\n          style={{\r\n            width:\r\n              (this.props.location.pathname === \"/chat\" ||\r\n                this.props.location.pathname === \"/search\") &&\r\n              window.matchMedia(\"(max-width: 500px)\").matches\r\n                ? \"0%\"\r\n                : this.props.match.params.user &&\r\n                  window.matchMedia(\"(max-width: 500px)\").matches\r\n                ? \"100%\"\r\n                : \"70%\",\r\n            display:\r\n              (this.props.location.pathname === \"/chat\" ||\r\n                this.props.location.pathname === \"/search\") &&\r\n              window.matchMedia(\"(max-width: 500px)\").matches\r\n                ? \"none\"\r\n                : this.props.match.params.user &&\r\n                  window.matchMedia(\"(max-width: 500px)\").matches\r\n                ? \"flex\"\r\n                : \"flex\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          <Switch>\r\n            <Route path=\"/search\" component={empty} exact />\r\n            <Route path=\"/chat/:user\" component={ChatHistory} exact />\r\n            <Route component={empty} />\r\n          </Switch>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Chat;\r\n","import React from \"react\";\r\nimport { Switch, Route, withRouter } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass Login extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      email: \"\",\r\n      password: \"\",\r\n      error: \"\",\r\n      loading: false,\r\n    };\r\n  }\r\n  login = (e) => {\r\n    e.preventDefault();\r\n    if (this.state.email !== \"\" && this.state.password !== \"\") {\r\n      this.setState((prev) => ({\r\n        ...prev,\r\n        error: \"\",\r\n        loading: true,\r\n      }));\r\n      fetch(\"http://localhost:8000/auth_login\", {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"text/plain\",\r\n        },\r\n        body: JSON.stringify({\r\n          email: this.state.email,\r\n          password: this.state.password,\r\n        }),\r\n      }).then((file) => {\r\n        file.json().then((res) => {\r\n          if (!res.success) {\r\n            this.setState((prev) => ({\r\n              ...prev,\r\n              error: res.message,\r\n              loading: false,\r\n            }));\r\n          } else {\r\n            localStorage.setItem(\"chat-app-from\", res.username);\r\n            localStorage.setItem(\"chat-app-uid\", res.uid);\r\n            localStorage.setItem(\"chat-app-token\", res.token);\r\n            localStorage.setItem(\"chat-app-isLogined\", true);\r\n            this.props.history.push(\"/chat\");\r\n          }\r\n        });\r\n      });\r\n    }\r\n  };\r\n\r\n  handle = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n  };\r\n  render() {\r\n    return (\r\n      <div className=\"chat-login-main\">\r\n        <h3>Login</h3>\r\n        <form>\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            name=\"email\"\r\n            onChange={this.handle}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            name=\"password\"\r\n            onChange={this.handle}\r\n          />\r\n          <button onClick={this.login}>\r\n            {this.state.loading ? <div className=\"load\"></div> : null}\r\n            &nbsp;Login\r\n          </button>\r\n          <p\r\n            style={{\r\n              alignSelf: \"flex-start\",\r\n              fontFamily: \"sans-serif\",\r\n              color: \"red\",\r\n              fontSize: 14,\r\n            }}\r\n          >\r\n            {this.state.error}\r\n          </p>\r\n        </form>\r\n        <Link style={{ color: \"var(--blue--)\" }} to=\"/account/register\">\r\n          Register?\r\n        </Link>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass Register extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n      error: \"\",\r\n      loading: false,\r\n    };\r\n  }\r\n  login = (e) => {\r\n    e.preventDefault();\r\n    if (this.state.email !== \"\" && this.state.password !== \"\") {\r\n      this.setState((prev) => ({\r\n        ...prev,\r\n        error: \"\",\r\n        loading: true,\r\n      }));\r\n      fetch(\"http://localhost:8000/auth_register\", {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"text/plain\",\r\n        },\r\n        body: JSON.stringify({\r\n          username: this.state.username,\r\n          email: this.state.email,\r\n          password: this.state.password,\r\n        }),\r\n      }).then((file) => {\r\n        file.json().then((res) => {\r\n          if (!res.success) {\r\n            this.setState((prev) => ({\r\n              ...prev,\r\n              error: res.message,\r\n              loading: false,\r\n            }));\r\n          } else {\r\n            localStorage.setItem(\"chat-app-from\", res.from);\r\n            localStorage.setItem(\"chat-app-uid\", res.uid);\r\n            localStorage.setItem(\"chat-app-token\", res.token);\r\n            localStorage.setItem(\"chat-app-isLogined\", true);\r\n            this.props.history.push(\"/chat\");\r\n          }\r\n        });\r\n      });\r\n    }\r\n  };\r\n\r\n  handle = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n  };\r\n  render() {\r\n    return (\r\n      <div className=\"chat-login-main\">\r\n        <h3>Register</h3>\r\n        <form>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Username\"\r\n            name=\"username\"\r\n            onChange={this.handle}\r\n          />\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            name=\"email\"\r\n            onChange={this.handle}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            name=\"password\"\r\n            onChange={this.handle}\r\n          />\r\n          <button onClick={this.login}>\r\n            {this.state.loading ? <div className=\"load\"></div> : null}\r\n            &nbsp;Register\r\n          </button>\r\n          <p\r\n            style={{\r\n              alignSelf: \"flex-start\",\r\n              fontFamily: \"sans-serif\",\r\n              color: \"red\",\r\n              fontSize: 14,\r\n            }}\r\n          >\r\n            {this.state.error}\r\n          </p>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass Auth extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"chat-auth\">\r\n        <h3>Chat App</h3>\r\n        <Switch>\r\n          <Route path=\"/account/login\" component={Login} exact />\r\n          <Route path=\"/account/register\" component={Register} exact />\r\n        </Switch>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Auth);\r\n","function getMessageKey(messages, id) {\r\n  for (let i = 0; i < messages.length; i++) {\r\n    if (messages[i]._id === id) {\r\n      return i;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nexport default getMessageKey;\r\n","import React from \"react\";\r\nimport \"./App.css\";\r\nimport { BrowserRouter, Route, Redirect } from \"react-router-dom\";\r\nimport Chat from \"./chat\";\r\nimport { createBrowserHistory } from \"history\";\r\nimport Auth from \"./component/chatauth/login\";\r\nimport getkey from \"./getKey\";\r\nimport getMessageKey from \"./get_message_key\";\r\n\r\nimport { createStore } from \"redux\";\r\n\r\nimport { Provider } from \"react-redux\";\r\n\r\nvar init_state = {\r\n  messages: null,\r\n};\r\n\r\nconst reducer = function (state = init_state, action) {\r\n  switch (action.type) {\r\n    case \"ADD_MESSAGE\":\r\n      var length = state.messages.length;\r\n      var key = getkey(\r\n        state,\r\n        action.payload.to === localStorage.getItem(\"chat-app-from\")\r\n          ? action.payload.from\r\n          : action.payload.to\r\n      );\r\n      if (key !== false) {\r\n        let mess1 = [...state.messages[key].messages, action.payload];\r\n        let val1 = {\r\n          _id: state.messages[key]._id,\r\n          messages: mess1,\r\n        };\r\n\r\n        let a1 = state.messages.slice(0, key);\r\n        let b1 = state.messages.slice(key + 1, length);\r\n        return {\r\n          ...state,\r\n          messages: [val1, ...a1, ...b1],\r\n        };\r\n      } else {\r\n        let a2 = [...state.messages];\r\n        let mess2 = [action.payload];\r\n        let val2 = {\r\n          _id:\r\n            action.payload.to === localStorage.getItem(\"chat-app-from\")\r\n              ? action.payload.from\r\n              : action.payload.to,\r\n          messages: mess2,\r\n        };\r\n        return {\r\n          ...state,\r\n          messages: [val2, ...a2],\r\n        };\r\n      }\r\n\r\n    case \"GET_MESSAGE\":\r\n      return {\r\n        ...state,\r\n        messages: action.payload,\r\n      };\r\n\r\n    case \"SET_MESSAGE\":\r\n      return {\r\n        ...state,\r\n        messages: null,\r\n      };\r\n\r\n    case \"DELETE_MESSAGE\":\r\n      var key_user = getkey(state, action.payload.user);\r\n      var key_id = getMessageKey(\r\n        state.messages[key_user].messages,\r\n        action.payload.id\r\n      );\r\n      state.messages[key_user].messages = [\r\n        ...state.messages[key_user].messages.slice(0, key_id),\r\n        ...state.messages[key_user].messages.slice(\r\n          key_id + 1,\r\n          state.messages[key_user].messages.length\r\n        ),\r\n      ];\r\n      console.log(state.messages[key_user].messages.slice(0, key_id));\r\n      return {\r\n        ...state,\r\n        messages: [...state.messages],\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst store = createStore(reducer);\r\n\r\nconst history = createBrowserHistory();\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n  render() {\r\n    return (\r\n      <BrowserRouter history={history}>\r\n        <Provider store={store}>\r\n          <div className=\"App\">\r\n            <Redirect from=\"/\" to=\"/chat\" />\r\n            <Route path=\"/account/login\" component={Auth} exact />\r\n            <Route path=\"/account/register\" component={Auth} exact />\r\n            <Route path=\"/chat\" component={Chat}>\r\n              <Route path=\"/:user\" component={Chat} />\r\n            </Route>\r\n            <Route path=\"/search\" component={Chat} />\r\n          </div>\r\n        </Provider>\r\n      </BrowserRouter>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nfunction urlBase64ToUint8Array(base64String) {\r\n  var padding = \"=\".repeat((4 - (base64String.length % 4)) % 4);\r\n  var base64 = (base64String + padding).replace(/\\-/g, \"+\").replace(/_/g, \"/\");\r\n\r\n  var rawData = window.atob(base64);\r\n  var outputArray = new Uint8Array(rawData.length);\r\n\r\n  for (var i = 0; i < rawData.length; ++i) {\r\n    outputArray[i] = rawData.charCodeAt(i);\r\n  }\r\n  return outputArray;\r\n}\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport async function register(config) {\r\n  if (\"serviceWorker\" in navigator) {\r\n    Notification.requestPermission();\r\n    await navigator.serviceWorker\r\n      .register(\"/service-worker.js\", {\r\n        scope: \"/\",\r\n      })\r\n      .then(async (reg) => {\r\n        if (reg.active) {\r\n          const subscription = await PushManager.subscribe({\r\n            userVisibilityOnly: true,\r\n            applicationServerKey: urlBase64ToUint8Array(\r\n              \"BHzautfuAhAjFSZz20G7SHZa3K_-T2jsy8F5IDdk0vMVn3UNFxtmqRrh5ABeajp2L5X72Im6SAoeXbmHnSwxJCY\"\r\n            ),\r\n          });\r\n          fetch(\"http://localhost:8000/subscribe\", {\r\n            method: \"POST\",\r\n            mode: \"cors\",\r\n            headers: {\r\n              Accept: \"application/json\",\r\n              \"Content-Type\": \"text/plain\",\r\n            },\r\n            body: JSON.stringify(subscription),\r\n          });\r\n        }\r\n      });\r\n\r\n    // Notification.requestPermission(function (permission) {\r\n    //   // If the user accepts, let's create a notification\r\n    //   if (permission === \"granted\") {\r\n    //     var notification = new Notification(\"Hi there!\");\r\n    //   }\r\n    // });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl, { scope: \"./\" })\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                \"New content is available and will be used when all \" +\r\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { \"Service-Worker\": \"script\" },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get(\"content-type\");\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        //registration.unregister();\r\n        console.log(registration);\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n","module.exports = function getkey(state, val) {\r\n  for (let key = 0; key < state.messages.length; key++) {\r\n    if (state.messages[key]._id === val) {\r\n      return key;\r\n    }\r\n  }\r\n  return false;\r\n};\r\n","module.exports = __webpack_public_path__ + \"static/media/empty_inbox.27b4fca7.png\";"],"sourceRoot":""}